{"version":3,"sources":["../../src/middleware/errorHandlerMiddleware.js"],"names":["ErrorHandlerMiddleware","expressApp","use","req","res","next","err","Error","url","status","get","render","message","error"],"mappings":";;;;;;;;;;IACqBA,sB;;;;;;;;;AAEnB;;;2BAGOC,U,EAAY;AACjB;AACAA,iBAAWC,GAAX,CAAe,UAASC,GAAT,EAAcC,GAAd,EAAmBC,IAAnB,EAAyB;AACtC,YAAIC,MAAM,IAAIC,KAAJ,CAAaJ,IAAIK,GAAjB,gBAAV;AACAF,YAAIG,MAAJ,GAAa,GAAb;;AAEA;;AAEAJ,aAAKC,GAAL;AACD,OAPD;;AASA;AACA;AACA,UAAIL,WAAWS,GAAX,CAAe,KAAf,MAA0B,aAA9B,EAA6C;AAC3CT,mBAAWC,GAAX,CAAe,UAASI,GAAT,EAAcH,GAAd,EAAmBC,GAAnB,EAAwBC,IAAxB,EAA8B;AAC3CD,cAAIK,MAAJ,CAAWH,IAAIG,MAAJ,IAAc,GAAzB;AACAL,cAAIO,MAAJ,CAAW,OAAX,EAAoB;AAClBC,qBAASN,IAAIM,OADK;AAElBC,mBAAOP;AAFW,WAApB;AAID,SAND;AAOD;;AAED;AACA;AACAL,iBAAWC,GAAX,CAAe,UAASI,GAAT,EAAcH,GAAd,EAAmBC,GAAnB,EAAwBC,IAAxB,EAA8B;AAC3CD,YAAIK,MAAJ,CAAWH,IAAIG,MAAJ,IAAc,GAAzB;AACAL,YAAIO,MAAJ,CAAW,OAAX,EAAoB;AAClBC,mBAASN,IAAIM,OADK;AAElBC,iBAAO;AAFW,SAApB;AAID,OAND;AAOD;;;;;;AAGH;;;kBAxCqBb,sB","file":"errorHandlerMiddleware.js","sourcesContent":["\nexport default class ErrorHandlerMiddleware {\n\n  /**\n  * default error handler middleware\n  */\n  attach(expressApp) {\n    // catch 404 and forward to error handler\n    expressApp.use(function(req, res, next) {\n      let err = new Error(`${req.url} Not Found`);\n      err.status = 404;\n\n      // should render pretty 404 page here\n\n      next(err);\n    });\n\n    // development error handler\n    // will print stacktrace\n    if (expressApp.get('env') === 'development') {\n      expressApp.use(function(err, req, res, next) {\n        res.status(err.status || 500);\n        res.render('error', {\n          message: err.message,\n          error: err\n        });\n      });\n    }\n\n    // production error handler\n    // no stacktraces leaked to user\n    expressApp.use(function(err, req, res, next) {\n      res.status(err.status || 500);\n      res.render('error', {\n        message: err.message,\n        error: {}\n      });\n    });\n  }\n}\n\n// error handlers\n"]}